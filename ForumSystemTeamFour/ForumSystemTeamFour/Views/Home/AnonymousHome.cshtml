@using ForumSystemTeamFour.Models.DTOs
@model List<ThreadResponseDto>

<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8" />
    <title>Paranormality - Main page</title>
    <link rel="stylesheet" href="~/css/bootstrap.css" />
    <link rel="stylesheet" href="~/css/application.css" />
    <style>
* {
  box-sizing: border-box;
}
@@ media only screen and (max-width: 620px) {
  /* For mobile phones: */
  .left, .main, .right {
    width: 100%;
  }
}
</style>
</head>

<body style="background-color:#212529">
    
    <div id="messenger">P A R A N O R M A L I T Y</div>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js'></script>
    <script src="~/js/application.js"></script>
    
    <h3 style= "color:ghostwhite">Popular discussions:</h3>
    <div class=" = .table-responsive-sm">
        <table class="table table-hover table-dark">
            <thead>
                <tr>                    
                    <th scope="col">Topic</th>
                    <th scope="col">Replies</th>
                    <th scope="col">Author</th>
                    <th scope="col">Last post:</th>                    
                </tr>
            </thead>
            <tbody>
                @{
                    foreach (var thread in this.Model)
                    {
                        var latestReply = thread.Replies.OrderByDescending(reply => reply.CreationDate).FirstOrDefault();                        
                        <tr>
                            
                            <td>@thread.Title</td>
                            <td>@thread.Replies.Count()</td>
                            <td>@thread.Author</td>
                            @if (latestReply != null)
                            {
                                <td>@latestReply.CreationDate</td>
                            }
                            else
                            {
                                <td>No replies yet :&#0060;</td>
                            }
                            
                        </tr>
                    }
                }
                
            </tbody>
        </table>
    </div>
            
                
               
            </h2>
        
                <h4>
                    <a href="/Home/Error404" class="nav">404</a>
                </h4>

    </body>

</html>